(function(){"use strict";var t=6e5,e="ea-password";document.querySelectorAll(".ea-container").forEach(function(t){var s,o,i,a,c,l,d,u,h,m,f,v,p=t.querySelector(".ea-data");p?(l=JSON.parse(p.textContent),h=l.encrypted,d=l.hash):(h=t.dataset.encrypted,d=t.dataset.hash),c=t.querySelector(".ea-form"),s=document.createElement("div"),s.className="ea-overlay",s.appendChild(c),document.body.appendChild(s),i=s.querySelector(".ea-password-input"),o=s.querySelector(".ea-submit-btn"),u=s.querySelector(".ea-error"),a=t.querySelector(".ea-content");function r(t){if(!t)return;u.hidden=!0,o.disabled=!0,o.textContent="Decryptingâ€¦",crypto.subtle.digest("SHA-256",(new TextEncoder).encode(t)).then(function(e){var s=Array.from(new Uint8Array(e)).map(function(e){return e.toString(16).padStart(2,"0")}).join("");if(s!==d){g();return}return n(t,h)}).then(function(n){if(!n)return;try{sessionStorage.setItem(e,t)}catch{}var s=n.replace(/<!--meta:\w+:.+-->\n?/g,""),o=marked.parse(s);a.innerHTML=o,a.classList.add("prose","dark:prose-invert","max-w-none"),a.querySelectorAll("pre code").forEach(function(e){hljs.highlightElement(e)}),c.hidden=!0,a.hidden=!1}).catch(function(e){console.error("[early-access] Decryption error:",e),g()})}function g(){u.hidden=!1,o.disabled=!1,o.textContent="Unlock",i.value="",i.focus()}if(o.addEventListener("click",function(){r(i.value)}),i.addEventListener("keydown",function(e){e.key==="Enter"&&r(i.value)}),v=new URLSearchParams(window.location.search),m=v.get("p"),m)history.replaceState(null,"",window.location.pathname+window.location.hash),r(m);else try{f=sessionStorage.getItem(e),f&&r(f)}catch{}});function n(e,n){var s=Uint8Array.from(atob(n),function(e){return e.charCodeAt(0)}),o=s.slice(0,16),i=s.slice(16,28),a=s.slice(28);return crypto.subtle.importKey("raw",(new TextEncoder).encode(e),"PBKDF2",!1,["deriveKey"]).then(function(e){return crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:t,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["decrypt"])}).then(function(e){return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,a)}).then(function(e){return(new TextDecoder).decode(e)})}})()