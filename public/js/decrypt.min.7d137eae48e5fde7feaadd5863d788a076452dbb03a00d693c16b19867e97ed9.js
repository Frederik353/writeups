(function(){"use strict";var e=6e5;document.querySelectorAll(".ea-container").forEach(function(e){var n,s,o,i,a,r,c,l,u,m,f,h=e.querySelector(".ea-data");h?(a=JSON.parse(h.textContent),r=a.encrypted,c=a.hash):(r=e.dataset.encrypted,c=e.dataset.hash),u=e.querySelector(".ea-form"),n=e.querySelector(".ea-password-input"),s=e.querySelector(".ea-submit-btn"),i=e.querySelector(".ea-error"),o=e.querySelector(".ea-content"),m=new URLSearchParams(window.location.search),l=m.get("p"),l&&(n.value=l,d(),f=window.location.pathname+window.location.hash,history.replaceState(null,"",f));function d(){var e=n.value;if(!e)return;i.hidden=!0,s.disabled=!0,s.textContent="Decryptingâ€¦",crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e)).then(function(o){var a=Array.from(new Uint8Array(o)).map(function(e){return e.toString(16).padStart(2,"0")}).join("");if(a!==c){i.hidden=!1,s.disabled=!1,s.textContent="Unlock",n.value="",n.focus();return}return t(e,r)}).then(function(e){if(!e)return;var t=e.replace(/<!--meta:\w+:.+-->\n?/g,""),n=marked.parse(t);o.innerHTML=n,o.classList.add("prose","dark:prose-invert","max-w-none"),o.querySelectorAll("pre code").forEach(function(e){hljs.highlightElement(e)}),u.hidden=!0,o.hidden=!1}).catch(function(){i.hidden=!1,s.disabled=!1,s.textContent="Unlock",n.value="",n.focus()})}s.addEventListener("click",d),n.addEventListener("keydown",function(e){e.key==="Enter"&&d()})});function t(t,n){var s=Uint8Array.from(atob(n),function(e){return e.charCodeAt(0)}),o=s.slice(0,16),i=s.slice(16,28),a=s.slice(28);return crypto.subtle.importKey("raw",(new TextEncoder).encode(t),"PBKDF2",!1,["deriveKey"]).then(function(t){return crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:e,hash:"SHA-256"},t,{name:"AES-GCM",length:256},!1,["decrypt"])}).then(function(e){return crypto.subtle.decrypt({name:"AES-GCM",iv:i},e,a)}).then(function(e){return(new TextDecoder).decode(e)})}})()